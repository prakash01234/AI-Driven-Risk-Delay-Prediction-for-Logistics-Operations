<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Supply Chain Risk Intelligence</title>

<style>
:root{
    --ai-blue:#60a5fa;
    --ai-green:#34d399;
    --ai-purple:#a855f7;
    --ai-orange:#fb923c;

    --dark-bg:#020617;
    --dark-bg-2:#0f172a;

    --glass-dark:rgba(15,23,42,.75);

    --text-light:#e5e7eb;
    --muted:#94a3b8;
}

*{
    margin:0;
    padding:0;
    box-sizing:border-box;
    font-family:'Poppins','Segoe UI',system-ui,sans-serif;
}

/* ================= UPDATED DYNAMIC BACKGROUND ================= */
body{
    min-height:100vh;
    padding:40px 20px;
    color:var(--text-light);
    overflow-x:hidden;

    background: linear-gradient(-45deg, #0f172a, #1e3a8a, #0ea5e9, #9333ea, #0f172a);
    background-size: 400% 400%;
    animation: gradientBG 20s ease infinite;
}

@keyframes gradientBG{
    0%{background-position:0% 50%;}
    50%{background-position:100% 50%;}
    100%{background-position:0% 50%;}
}

/* ================= CONTAINER ================= */
.container{
    max-width:760px;
    margin:auto;
    padding:42px;
    border-radius:28px;
    background:var(--glass-dark);
    backdrop-filter:blur(22px);
    box-shadow:0 30px 80px rgba(0,0,0,.45);
}

/* ================= AI TITLE ================= */
.ai-title{
    text-align:center;
    font-size:36px;
    font-weight:700;
    margin-bottom:10px;
}

/* üî• UPDATED TITLE GRADIENT */
.gradient-text{
    background:linear-gradient(
        90deg,
        #00f5ff,
        #7c3aed,
        #ec4899,
        #22d3ee
    );
    -webkit-background-clip:text;
    background-clip:text;
    -webkit-text-fill-color:transparent;
}

/* ‚ùå Removed emoji glow */
.ai-emoji{
    margin-right:6px;
}

.intro{
    text-align:center;
    color:var(--muted);
    margin-bottom:35px;
}

/* ================= FORM ================= */
label{
    margin-top:18px;
    display:block;
    font-weight:600;
}

input{
    width:100%;
    padding:14px 16px;
    border-radius:14px;
    border:1px solid rgba(255,255,255,.15);
    margin-top:6px;
    font-size:15px;
    background:rgba(255,255,255,.95);
}

input:focus{
    outline:none;
    border-color:var(--ai-blue);
    box-shadow:0 0 0 3px rgba(96,165,250,.35);
}

/* ================= BUTTONS ================= */
.buttons{
    display:flex;
    gap:16px;
    margin-top:35px;
}

button{
    flex:1;
    padding:16px;
    border-radius:18px;
    border:none;
    font-size:16px;
    font-weight:600;
    cursor:pointer;
}

.primary{
    color:white;
    background:linear-gradient(135deg,var(--ai-blue),var(--ai-purple));
    box-shadow:0 15px 35px rgba(96,165,250,.4);
}

.secondary{
    color:#022c22;
    background:linear-gradient(135deg,var(--ai-green),#a7f3d0);
}

/* ================= DASHBOARD ================= */
.badge{
    display:inline-block;
    padding:12px 22px;
    border-radius:999px;
    font-weight:700;
    margin:20px 0;
}

.high{background:#7f1d1d;color:#fecaca}
.moderate{background:#78350f;color:#fde68a}
.low{background:#064e3b;color:#a7f3d0}

.progress{margin:25px 0}

.bar{
    height:14px;
    background:#334155;
    border-radius:10px;
    overflow:hidden;
}

.fill{
    height:100%;
    width:0%;
    background:linear-gradient(90deg,var(--ai-blue),var(--ai-green));
    transition:width 1s ease;
}

/* ================= INFO CARDS ================= */
.card{
    margin-top:28px;
    padding:26px;
    border-radius:20px;
    background:rgba(2,6,23,.9);
    box-shadow:0 20px 50px rgba(0,0,0,.6);
}

.card h3{
    margin-bottom:12px;
    color:#e0f2fe;
}

.card li{
    margin-bottom:10px;
    color:#e5e7eb;
}

/* ================= CURSOR ================= */
.cursor{
    display:inline-block;
    width:3px;
    height:32px;
    background:#60a5fa;
    margin-left:6px;
    animation:blink 1s infinite;
}

@keyframes blink{
    50%{opacity:0}
}
</style>
</head>

<body>

<div class="container">

{% if not prediction %}

<h1 class="ai-title">
<span class="ai-emoji">ü§ñ</span>
<span id="typing" class="gradient-text"></span>
<span class="cursor"></span>
</h1>

<p class="intro">Friendly AI system for Supply Chain Risk & Delay Prediction</p>

<form method="POST" action="/">
    <label>Traffic Congestion Level</label>
    <input type="number" name="traffic_congestion_level" required>

    <label>Weather Condition Severity</label>
    <input type="number" name="weather_condition_severity" required>

    <label>Port Congestion Level</label>
    <input type="number" name="port_congestion_level" required>

    <label>Route Risk Level</label>
    <input type="number" name="route_risk_level" required>

    <label>Disruption Likelihood Score</label>
    <input type="number" name="disruption_likelihood_score" step="any" required>

    <label>Supplier Reliability Score</label>
    <input type="number" name="supplier_reliability_score" step="any" required>

    <label>ETA Variation (hours)</label>
    <input type="number" name="eta_variation_hours" required>

    <label>Fuel Consumption Rate</label>
    <input type="number" name="fuel_consumption_rate" required>

    <div class="buttons">
        <button class="primary" type="submit">Analyze Risk</button>
        <button class="secondary" type="reset">Reset</button>
    </div>
</form>

{% else %}

<h1 class="ai-title gradient-text">üìä Risk Analysis Dashboard</h1>

<div class="badge
{% if prediction.risk_class == 'High Risk' %}high
{% elif prediction.risk_class == 'Moderate Risk' %}moderate
{% else %}low{% endif %}">
{{ prediction.risk_class }}
</div>

<div class="progress">
<strong>Risk Probability: {{ prediction.probability }}%</strong>
<div class="bar"><div class="fill" id="riskBar"></div></div>
</div>

<div class="card">
<h3>ü§ñ Why this risk?</h3>
<ul>
<li>Traffic congestion affected delivery timelines</li>
<li>Weather & port conditions added uncertainty</li>
<li>Supplier reliability influenced stability</li>
</ul>
</div>

<div class="card">
<h3>‚úÖ Recommended Actions</h3>
<ul>
{% for sug in prediction.suggestions %}
<li>{{ sug }}</li>
{% endfor %}
</ul>
</div>

<div class="buttons">
<a href="/" style="flex:1;text-decoration:none">
<button class="primary" style="width:100%">Analyze Another Shipment</button>
</a>
</div>

<script>
var p = Number("{{ prediction.probability | default(0) }}");
document.getElementById("riskBar").style.width = p + "%";
</script>

{% endif %}

</div>

<script>
const text = "AI-Driven Risk & Delay Prediction";
let i = 0;
const typing = document.getElementById("typing");
const cursor = document.querySelector(".cursor");

if(typing){
  const interval = setInterval(() => {
    if(i < text.length){
      typing.innerHTML += text.charAt(i);
      i++;
    } else {
      clearInterval(interval);
      if(cursor) cursor.style.display = "none";
    }
  }, 70);
}
</script>

</body>
</html>
